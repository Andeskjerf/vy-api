## API endpoints

- SEARCH AUTOSUGGEST
  https://www.vy.no/services/location/places/autosuggest?query=value&searchOrigin=default
- takes URL parameters
- the API call that is made when the user searches for a location on the front page
- contains destinations, along with their NSR stop code & GPS coords
- we must call this endpoint first to get NSR stop codes & coords, the search endpoint requires them

---

- SEARCH
  https://www.vy.no/services/itinerary/api/travel-planner/search
- takes a json body
- we must do this first to find the ID for the journey we want to monitor
- appears to require the lat and long coords for each stop. list of journeys is empty if not included
- possibly also requires the NSR code for the stop as well

---

- AVAILABLE CARTS
  https://www.vy.no/services/seat/availableseating/available-railcars
- takes a json body
- returns a json array consisting of each cart, including available seats & beds for each cart
- how to call? it appears to need a orderGuid, which is given to the client when a new order is created. not possible to use ID of train?

---

- GET ORDER
  https://www.vy.no/services/booking/api/v2/orders/<id>
- takes a json body
- contains the chosen train, or journey, in an array called 'journey'
- ID is returned by the make order endpoint
- contains available accommodations. we need to update our order with one to finally get seating

---

- MAKE ORDER
  https://www.vy.no/services/booking/api/v2/orders
- takes a json body
- request contains an array of ids, named 'offerIds'
- API responds with a new ID, this appears to be our order ID
- ~~not sure where the sent ID is from, perhaps generated by the client?~~

---

- OFFERS
  https://www.vy.no/services/booking/api/offer
- takes a json body
- gets available offers
- see below for where to find ID that can be used to invoke the available-railcars endpoint

**MUST GO THROUGH OFFERS!!**

The orderGuid can be found in one of the itineraryOffers from the offers API call.

    Object -> segmentOffers -> Object -> priceConfigurations

API call to get seats

    curl -v -A "Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101 Firefox/81.0" -X POST -H "Content-Type: application/json" -d '{"orderGuid":"30f3d6d6-0689-4070-b586-d548f3fc585c","specificationType":"SEAT","fromNsrCode":"NSR:StopPlace:337","toNsrCode":"NSR:StopPlace:548"}' https://www.vy.no/services/seat/availableseating/available-railcars

Must have:

- Content-Type: JSON
- Valid user agent
- orderGuid
- specificationType
- fromNsrCode
- toNsrCode
